<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title th:text="#{site.title.my.account}">账号信息</title>
<meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
<meta name="description" content="">
<meta name="author" content="">
<link rel="stylesheet" type="text/css" href="../../static/css/cloud-admin.css"
    th:href="@{~/css/cloud-admin.css}" />
<link rel="stylesheet" type="text/css" href="../../static/css/themes/default.css" id="skin-switcher"
    th:href="@{~/css/themes/default.css}" />
<link rel="stylesheet" type="text/css" href="../../static/css/responsive.css"
    th:href="@{~/css/responsive.css}" />
<link rel="stylesheet" type="text/css" href="../../static/font-awesome/css/font-awesome.min.css"
    th:href="@{~/font-awesome/css/font-awesome.min.css}" />
<link rel="stylesheet" type="text/css" href="../../static/css/animatecss/animate.min.css"
    th:href="@{~/css/animatecss/animate.min.css}" />
<link rel="stylesheet" type="text/css"
    href="../../static/js/bootstrap-daterangepicker/daterangepicker-bs3.css"
    th:href="@{~/js/bootstrap-daterangepicker/daterangepicker-bs3.css}" />
<link rel="stylesheet" type="text/css" href="../../static/js/jquery-todo/css/styles.css"
    th:href="@{~/js/jquery-todo/css/styles.css}" />
<link rel="stylesheet" type="text/css" href="../../static/js/fullcalendar/fullcalendar.min.css"
    th:href="@{~/js/fullcalendar/fullcalendar.min.css}" />
<link rel="stylesheet" type="text/css" href="../../static/js/gritter/css/jquery.gritter.css"
    th:href="@{~/js/gritter/css/jquery.gritter.css}" />
<link rel="stylesheet" type="text/css" href="../../static/js/uniform/css/uniform.default.min.css"
    th:href="@{~/js/uniform/css/uniform.default.min.css}"/>
<link rel="stylesheet" type="text/css" href="../../static/bootstrap-table/bootstrap-table.css"
    th:href="@{~/bootstrap-table/bootstrap-table.css}" />
<link rel="stylesheet" type="text/css" href="../../static/cordwood/css/cordwood.css"
    th:href="@{~/cordwood/css/cordwood.css}" />
</head>
<body>
    <!-- HEADER -->
    <header class="navbar clearfix" id="header">
        <div class="container" th:replace="admin_header.html :: header"></div>
    </header>
    <!--/HEADER -->
    <!-- PAGE -->
    <section id="page">
        <div id="sidebar" class="sidebar">
            <div class="sidebar-menu nav-collapse" th:replace="admin_sidebar.html :: sidebar"></div>
        </div>
        <div id="main-content">
            <div class="container">
                <div class="row">
                    <div id="content" class="col-lg-12">
                        <!-- PAGE HEADER-->
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="page-header">
                                    <ul class="breadcrumb" th:replace="admin_navbar.html :: navbar">
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- /PAGE HEADER -->
                        <!-- USER PROFILE -->
                        <div class="row">
                            <div class="col-md-12">
                                <!-- BOX -->
                                <div class="box border primary">
                                    <div class="box-title">
                                        <h4><i class="fa fa-key"></i> 账号信息</h4>
                                    </div>
                                    <div class="box-body">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="list-group">
                                                    <div>
                                                        <img class="img-responsive" src="../../static/images/profile/avatar.jpg" 
                                                            th:src="@{~/admin/my_avatar}"/>
                                                    </div>
                                                    <div class="list-group-item profile-details">
                                                        <h2 class="truncate-tail middle" 
                                                            th:text="${user.name}">
                                                            用户姓名</h2>
                                                        <p>
                                                            <i class="fa fa-circle text-green"></i> 在线
                                                        </p>
                                                        <p th:text="${user.aboutMe}">个人介绍个人介绍个人介绍个人介绍个人介绍个人介绍个人介绍</p>
                                                        <p>
                                                            <i class="fa fa-envelope fa-fw"></i> 
                                                            <a href="#" th:text="${user.email}">exam@sparksoft.com.cn</a>
                                                        </p>
                                                    </div>
                                                    <a href="#" class="list-group-item" th:href="@{~/admin/my_profile}">
                                                        <i class="fa fa-edit fa-fw"></i>
                                                        个人资料
                                                    </a>
                                                    <a href="#" class="list-group-item">
                                                        <span class="badge badge-red">9</span>
                                                        <i class="fa fa-calendar fa-fw"></i>
                                                        事件
                                                    </a>
                                                    <a href="#" class="list-group-item">
                                                        <span class="badge badge-red">1</span>
                                                        <i class="fa fa-comment-o fa-fw"></i>
                                                        通知
                                                    </a>
                                                    <a href="#" class="list-group-item">
                                                        <i class="fa fa-history fa-fw"></i>
                                                        日志
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="col-md-9" style="padding-left:0;">
                                                <div class="col-md-8">
                                                    <div class="row">
                                                        <div class="col-lg-6">
                                                            <div class="dashbox panel panel-default">
                                                                <div class="panel-body">
                                                                    <div class="panel-left red">
                                                                        <i class="fa fa-fire fa-3x"></i>
                                                                    </div>
                                                                    <div class="panel-right">
                                                                        <div class="number" th:text="${statistics.accessCount}">3932</div>
                                                                        <div class="title">插件访问次数</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div
                                                                class="dashbox panel panel-default">
                                                                <div class="panel-body">
                                                                    <div class="panel-left blue">
                                                                        <i class="fa fa-bolt fa-3x"></i>
                                                                    </div>
                                                                    <div class="panel-right">
                                                                        <div class="number">
                                                                        <span th:text="${#numbers.formatDecimal(statistics.timeUsageAvg, 1, 1)}">
                                                                            23</span> <small>ms</small>
                                                                        </div>
                                                                        <div class="title">插件响应时间</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div
                                                                class="quick-pie panel panel-default">
                                                                <div class="panel-body">
                                                                    <div class="col-md-4 text-center">
                                                                        <div id="pie_1" class="piechart" data-percent="9.8"
                                                                            th:data-percent="${statistics.faultRate}">
                                                                            <span class="percent"></span>
                                                                        </div>
                                                                        <div>插件故障率</div>
                                                                    </div>
                                                                    <div class="col-md-4 text-center">
                                                                        <div id="pie_2" class="piechart" data-percent="73"
                                                                            th:data-percent="${statistics.usageRage}">
                                                                            <span class="percent"></span>
                                                                        </div>
                                                                        <div>插件使用率</div>
                                                                    </div>
                                                                    <div class="col-md-4 text-center">
                                                                        <div id="pie_3" class="piechart" data-percent="44"
                                                                            th:data-percent="${statistics.dataShare}">
                                                                            <span class="percent"></span>
                                                                        </div>
                                                                        <div>插件流量占比</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="box border">
                                                        <div class="box-title">访问渠道分析</div>
                                                        <div class="box-body">
                                                            <ul class="list-unstyled">
                                                                <li>
                                                                    <h6><i class="fa fa-desktop"></i> 桌面</h6>
                                                                    <div class="progress thin">
                                                                      <div class="progress-bar" style="width: 20%"
                                                                        th:style="${'width: '+statistics.channelRequest.desktopPercent+'%;'}"
                                                                        th:title="${statistics.channelRequest.desktopCount}"></div>
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <h6><i class="fa fa-tablet"></i> 平板</h6>
                                                                    <div class="progress thin">
                                                                      <div class="progress-bar progress-bar-success" style="width: 30%"
                                                                      th:style="${'width: '+statistics.channelRequest.tabletPercent+'%;'}"
                                                                      th:title="${statistics.channelRequest.tabletCount}"></div>
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <h6><i class="fa fa-mobile"></i> 移动设备</h6>
                                                                    <div class="progress thin">
                                                                      <div class="progress-bar progress-bar-pink" style="width: 40%"
                                                                      th:style="${'width: '+statistics.channelRequest.mobilePercent+'%;'}"
                                                                      th:title="${statistics.channelRequest.mobileCount}"></div>
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <h6><i class="fa fa-circle-o"></i> 其他</h6>
                                                                    <div class="progress thin">
                                                                      <div class="progress-bar progress-bar-warning" style="width: 10%"
                                                                      th:style="${'width: '+statistics.channelRequest.otherPercent+'%;'}"
                                                                      th:title="${statistics.channelRequest.otherCount}"></div>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="col-md-12">
                                                            <div class="box border">
                                                                <div class="box-title">
                                                                    <h4>
                                                                        <i class="fa fa-bar-chart"></i>
                                                                        <span class="hidden-inline-mobile">插件访问统计</span>
                                                                    </h4>
                                                                </div>
                                                                <div class="box-body">
                                                                    <div id="toolbar">
                                                                        <div class="btn-group" style="float: none;">
                                                                            <a href="#" th:href="@{~/admin/plugins/logs}">
                                                                                <button class="btn btn-default">
                                                                                    <i class="fa fa-history"></i> 访问日志
                                                                                </button>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <table id="dataTable"></table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /CONTENT-->
                </div>
            </div>
        </div>
    </section>
    <script type="text/javascript" src="../../static/js/jquery/jquery-2.0.3.min.js"
        th:src="@{~/js/jquery/jquery-2.0.3.min.js}"></script>
    <script type="text/javascript"
        src="../../static/js/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js"
        th:src="@{~/js/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js}"></script>
    <script type="text/javascript" src="../../static/bootstrap/js/bootstrap.min.js"
        th:src="@{~/bootstrap/js/bootstrap.min.js}"></script>
    <script type="text/javascript" src="../../static/js/bootstrap-daterangepicker/moment.min.js"
        th:src="@{~/js/bootstrap-daterangepicker/moment.min.js}"></script>
    <script type="text/javascript"
        src="../../static/js/bootstrap-daterangepicker/daterangepicker.min.js"
        th:src="@{~/js/bootstrap-daterangepicker/daterangepicker.min.js}"></script>
    <script type="text/javascript"
        src="../../static/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js"
        th:src="@{~/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js}"></script>
    <script type="text/javascript"
        src="../../static/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js"
        th:src="@{~/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js}"></script>
    <script type="text/javascript"
        src="../../static/js/jQuery-slimScroll-1.3.0/slimScrollHorizontal.min.js"
        th:src="@{~/js/jQuery-slimScroll-1.3.0/slimScrollHorizontal.min.js}"></script>
    <script type="text/javascript" src="../../static/js/jQuery-BlockUI/jquery.blockUI.min.js"
        th:src="@{~/js/jQuery-BlockUI/jquery.blockUI.min.js}"></script>
    <script type="text/javascript" src="../../static/js/sparklines/jquery.sparkline.min.js"
        th:src="@{~/js/sparklines/jquery.sparkline.min.js}"></script>
    <script type="text/javascript" src="../../static/js/jquery-easing/jquery.easing.min.js"
        th:src="@{~/js/jquery-easing/jquery.easing.min.js}"></script>
    <script type="text/javascript" src="../../static/js/easypiechart/jquery.easypiechart.min.js"
        th:src="@{~/js/easypiechart/jquery.easypiechart.min.js}"></script>
    <script type="text/javascript" src="../../static/js/flot/jquery.flot.min.js"
        th:src="@{~/js/flot/jquery.flot.min.js}"></script>
    <script type="text/javascript" src="../../static/js/flot/jquery.flot.time.min.js"
        th:src="@{~/js/flot/jquery.flot.time.min.js}"></script>
    <script type="text/javascript" src="../../static/js/flot/jquery.flot.selection.min.js"
        th:src="@{~/js/flot/jquery.flot.selection.min.js}"></script>
    <script type="text/javascript" src="../../static/js/flot/jquery.flot.resize.min.js"
        th:src="@{~/js/flot/jquery.flot.resize.min.js}"></script>
    <script type="text/javascript" src="../../static/js/flot/jquery.flot.pie.min.js"
        th:src="@{~/js/flot/jquery.flot.pie.min.js}"></script>
    <script type="text/javascript" src="../../static/js/flot/jquery.flot.stack.min.js"
        th:src="@{~/js/flot/jquery.flot.stack.min.js}"></script>
    <script type="text/javascript" src="../../static/js/flot/jquery.flot.crosshair.min.js"
        th:src="@{~/js/flot/jquery.flot.crosshair.min.js}"></script>
    <script type="text/javascript" src="../../static/js/jquery-todo/js/paddystodolist.js"
        th:src="@{~/js/jquery-todo/js/paddystodolist.js}"></script>
    <script type="text/javascript" src="../../static/js/timeago/jquery.timeago.min.js"
        th:src="@{~/js/timeago/jquery.timeago.min.js}"></script>
    <script type="text/javascript" src="../../static/js/fullcalendar/fullcalendar.min.js"
        th:src="@{~/js/fullcalendar/fullcalendar.min.js}"></script>
    <script type="text/javascript" src="../../static/js/jQuery-Cookie/jquery.cookie.min.js"
        th:src="@{~/js/jQuery-Cookie/jquery.cookie.min.js}"></script>
    <script type="text/javascript" src="../../static/js/gritter/js/jquery.gritter.min.js"
        th:src="@{~/js/gritter/js/jquery.gritter.min.js}"></script>
    <script type="text/javascript" src="../../static/js/uniform/jquery.uniform.min.js"
        th:src="@{~/js/uniform/jquery.uniform.min.js}"></script>
    <script type="text/javascript" src="../../static/js/script.js" 
        th:src="@{~/js/script.js}"></script>
    <script type="text/javascript" src="../../static/bootstrap-table/bootstrap-table.js"
        th:src="@{~/bootstrap-table/bootstrap-table.js}"></script>
    <script type="text/javascript" src="../../static/bootstrap-table/bootstrap-table-zh-CN.js"
        th:src="@{~/bootstrap-table/bootstrap-table-zh-CN.js}"></script>
    <script type="text/javascript" src="../../templates/js/admin_sidebar.js" 
        th:src="@{~/admin/sidebar.js}"></script>
    <script>
        jQuery(document).ready(function() {     
            App.setPage("user_profile");
            App.init();
            loadSidebarItems('');
        });
        $('#dataTable').bootstrapTable({
            url: '/admin/my_plugin_stats.json',
            toolbar: '#toolbar',
            sidePagination: 'client',
            showRefresh: true,
            pageSize: 5,
            pageList: [10,20,50],
            pagination: true,
            columns: [{
                field: 'pluginName',
                title: '插件',
                valign: 'middle',
                formatter: function(value, row, index) {
                    if (row.pluginIsActive) {
                        return '<span class="label label-success">'+value+'</span>';
                    } else {
                        return '<span class="label label-warning">'+value+'</span>';
                    }
                }
            }, {
                field: 'inboundBytes',
                title: '请求（字节）',
                valign: 'middle',
                formatter: function(value, row, index) {
                    return value;
                }
            }, {
                field: 'outboundBytes',
                title: '响应（字节）',
                valign: 'middle'
            }, {
                field: 'accessCount',
                title: '访问次数',
                valign: 'middle'
            }, {
                field: 'timeUsageAvg',
                title: '响应时间',
                valign: 'middle',
                formatter: function(value, row, index) {
                    return value + ' ms';
                }
            }, {
                field: 'lastAccessTime',
                title: '最近访问',
                valign: 'middle'
            }]
        });
    </script>
    <!-- /JAVASCRIPTS -->
</body>
</html>